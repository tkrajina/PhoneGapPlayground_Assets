<!DOCTYPE HTML>
<html>
  <head>
    <meta name="viewport" content="width=320; user-scalable=no" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>PhoneGap</title>
	  <link rel="stylesheet" href="master.css" type="text/css" media="screen" title="no title">
	  <script type="text/javascript" charset="utf-8" src="phonegap-1.3.0.js"></script>
	  <script type="text/javascript" charset="utf-8" src="main.js"></script>

  </head>
  <body onload="init();" id="stage" class="theme">

<script>

onDeviceReady = function() {
	var dbShell = window.openDatabase( "test", "1.0", "Test DB", 1000000 )

	function populateDB( transaction ) {
		 transaction.executeSql( 'DROP TABLE IF EXISTS DEMO' )
		 transaction.executeSql( 'CREATE TABLE IF NOT EXISTS DEMO (id unique, data)' )
		 transaction.executeSql( 'INSERT INTO DEMO (id, data) VALUES (1, "First row")' )
		 transaction.executeSql( 'INSERT INTO DEMO (id, data) VALUES (2, "Second row")' )
		 alert( "Transaction SQLs executed successfuly" )
	}

	function errorCB(err) {
		alert( "Error processing SQL: " + err.code )
	}

	function successCB() {
		alert( "success!" )
	}

	dbShell.transaction( populateDB, errorCB, successCB )

	dbShell.transaction(
		function( tx ) {
			tx.executeSql(
				'SELECT * FROM DEMO',
				[],
				function( tx, results ) {
					// this will be empty since no rows were inserted.
					if( console ) {
						// this will be empty since no rows were inserted.
						// console.log( "Insert ID = " + results.insertId )

						// this will be 0 since it is a select statement
						// console.log( "Rows Affected = " + results.rowAffected )

						// the number of rows returned by the select statement
						console.log( "Insert ID = " + results.rows.length )

						for( i = 0; i < results.rows.length; i++ ) {
							var result = results.rows.item( i )
							alert( 'id:' + result.id + ' data:' + result.data )
						}
					} else {
						alert( 'No console :(' )
					}
				},
				function( err ) {
					alert( "Error processing SQL: " + err.code )
				}	
			)
		},
		function( err ) {
			alert( "Error processing SQL: " + err.code )
		}
	)

}

document.addEventListener( "deviceready", onDeviceReady, false );

</script>

  </body>
</html>
